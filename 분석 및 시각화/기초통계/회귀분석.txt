회귀분석 : 데이터 분포를 가장 잘 나타내는 직선(1차함수)을 그리는 것을 목표로 함
- 통계
    변수 x(독립변수)가 변수 y(종속변수)에 미치는 영향을 분석 => x와 y의 상관관계를 도출
    -> 도출된 회귀선을 건드리면 안된다
    y값은 혼자 있을 수 없고 x에 의해 나오는 변수
    가장 잘 설명할 수 있는 직선(대세 요인)의 기울기를 구하는 것
    머신러닝 : mse(최소제곱법 : mean squared error) 
        -> 회귀선과 점들간의 거리(y축 중심)의 제곱값들의 평균을 구해 그 값이 제일 작은 선이 잘 그려진 선이라고 판단

그럼 맨처음에 선을 긋기 위해서는 뭘보고 판단??
코드안에 있는 식을 보고 판단??(애초에 코드안에 식이 항상 있는지?)
없으면 어떻게 판단하는지??
데이터 값의 양 끝점??

- 머신러닝
    변수 x(독립변수)로 변수 y(종속변수)에 미치는 영향을 예측
    예측만 잘하면 회귀선을 건드려도 상관없다

    1. 명목척도 : 숫자로 구분하기 위해 임의로 부여, 보통 0과 1로 구분
    2. 서열척도 : 우열이 있는 경우(순위), 덧셈/뺄셈 불가능
    3. 등간척도 : 덧셈/뺄셈이 가능한 경우(섭씨온도), 곱셈은 불가능
    4. 비율척도 : 곱셈까지 가능한 경우(K 온도)

    범주형 척도 : 경우의 수가 정해져있는 척도
        -> 명목, 서열, 등간척도
    연속형 척도 : 경우의 수가 무한히 많은 척도
        -> 등간, 비율척도
우리가 나누는 기준에 따라 달라지는거 아님??
    
    1. 독립변수가 종속변수를 얼마나 잘 설명?
        미치는 영향의 크기(그래프 -> 기울기)
        표준화 계수 확인 : 독립변수와 종속변수의 단위가 다를 경우 독립변수와 종속변수를 표준화((x-m) / 시그마)해서 본다
        분산의 설명력 R^2 확인
            R^2 = (편차 - 오차) / 편차
                오차 = 측정값 - 예측값
                편차 = 측정값 - 예측값의 평균
                예측값 맞으면 1, 예측값 평균으로 수렴하게 되면 0(못맞추고 있는 경우)이 된다
                0.7 ~ 0.8이 적정, 1이면 조작가능성 확인필요

    2. 독립변수가 종속변수를 정말 잘 설명?
        다른 요인에 의해 잘 이루어졌는지 확인
        독립변수끼리는 서로 영향을 주면 안된다
        다중공선성 문제가 생길 수 있음 : 서로 다른 독립변수가 서로 영향을 주어 종속변수가 되어 해가 무수히 많아지게 되는 문제
            -> 문제 유발하는 변수 지워버리기 

    3. 한번 더해도 비슷한 결과가 나오는가? 분석결과가 필연적인가?
        다른 조건에서 해도 비슷한 결과가 나오는지 확인
        표준 오차 확인
            표준 오차 = 표본 평균의 표준편차
            모집단 = 전체 data
            모집단에서 일부만 가져온 data = 표본 집단
            표준오차는 작을수록 좋다

        T값 : 표본 집단 2개 뽑은 후 평균을 구한 값
            T값 = (집단1 평균 - 집단2 평균)/표준오차 = 회귀계수/표준오차 -> 기울기
            T값은 클수록 좋음
            T값은 표본 평균의 입장에서 볼 때 (0,1^2)의 정규분표로 표준화한 값
            예상하지 못한 값 p < 0.05 : T값이 95%에 근접한지 증명 (1.96시그마)

        난수로 표본집단을 뽑아 T값을 구해 비교
        500~3000번 비교 : 중심극한의 법칙

regression rigorous(엄중한 회귀)
    정밀한 회귀분석할 때 사용

    - 회귀의 전제조건
        1. 선형성 : data의 분포가 선형추세를 이루고 있어야 함, 회귀선이 직선인데 data분포가 이를 따라가야하기 때문
            선형분포가 아니면 data 값들을 변환(log함수, 지수함수 사용), mse로만 만들면 되기 때문에 회귀선을 변경해서 선형으로 만듬
            일반적으로는 선형회귀가 맞지만 머신러닝에서는 회귀그래프가 직선이 아니더라도 data분포와 비슷하면 가능하다고 봄  

        2. 독립성 : 
            다중공선성 때문에 해가 무수히 많이 나오는 문제가 생김
            일정한 패턴이 있으면 해당 요인에 의해 영향을 받는다고 생각하여 독립성이 있다고 판단

        3. 정규성 : 
            데이터가 정규분포를 따르는지, 회귀선에서 많이 멀어지지 않는지(=분산이 적은지)

        4. 등분산성 : 
            data가 모든 구간에서 분산이 일정한가

표본검증
    표본 추출 : data 분석할 때 모든 데이터를 분석하는 대신 일부를 추출하여 사용하는 것(시간적, 비용적 제한)
    상식적인 선에서 표본 추출을 해야 함 -> 표본이 집단을 대표할 수 있는지 생각

    1. 확률적 추출법
        표본 추출하는데 랜덤요소 포함
        - 무작위 추출 : 모집단 내에서 임의의 표본을 추출(무작위)
        - 체계적 추출 : 특정 비율로 표본 추출(10명당 1명씩, 자발적 신청 : 연구자가 통제할 수 없는 기준)
        - 층화 추출 : 특정 표본집단의 비율을 반영(인구 비율)

    2. 비확률적 추출법
        우연의 요소 사용하지 않음, 연구자의 의지가 개입, 상대방을 이해시키기 위해서는 노력과 객관적 자료들이 필요
        - 편의 추출 : 내 마음대로 표본 추출
        - 연쇄 추출 : 특수한 특성을 가진 사람들을 표본으로 선정, 건너건너 찾아가서 설문
        - 고의 추출 : 특정한 이유로 일부 표본을 측정, 연구에 어울리는 사람만 추출
        T검증은 필수

    Chi-squared Goodness to Fit test
        표본집단의 특징이 모집단의 특징과 유사한지 확인하는 방법
        카이제곱검정 = (관측값 - 기댓값)^2 / 기댓값
        값이 커질수록 대체할 수 없음
    
타당성 검증
    1. Convergent Validity(수렴타당성)
        독립변수들이 종속변수를 일관적으로 설명하고 있는지
        - AVE(Average Variance Extracted) : 특정 하나의 항목의 분산을 측정(0<x<1, 0.5이상)
            -> 독립변수 하나

        - 크론바하 알파(cronbach's alpha) : 특정 하나의 항목의 분산과 모든 항목의 평균 분산 비교(0<x<1, 0.7이상)
            -> 독립변수 간 비교

        - CR(composite reliability) : 특정 하나의 항목의 오차와 모든 항목의 평균 오차를 비교(0<x<1, 0.7이상)
            -> 독립변수 간 비교

    2. Discriminant Validity(구별타당성)
        독립 변수간의 상관관계 확인
        - VIF(variance inflation factor) : 설명력의 역수, 특정 독립변수가 빠졌음에도 설명력이 크게 줄지 않은 경우(0<x<1, 10미만)
            10이상이면 해당 독립변수 제거

        - 상관계수 행렬(correlation matrix) : 변수 a가 커지는 조건에서 변수 b도 같이 커지는 경우(0<x<1, 0.85미만)
            각 지표의 서열을 통해 지표간의 서열이 맞는지 확인

        - 공분산 행렬(covariance matrix) : 다중공선성이 발생하는 경우(0<x<1, 0.85미만)
            2개의 정규분포의 겹치는 부분 = 공분산
            공분산이 크면 서로 유사하다는 뜻
            공분산이 0.85이상이면 다중공선성이 있다고 판단
            특성선택 : 필요없다고 생각하는 독립변수 제거
            특성결합 : 서로 다른 독립변수를 묶어서 더 좋은 독립변수를 만듬(BMI = 키 + 몸무게)
                -> 독립변수와 종속변수에 대한 이해가 많이 필요하기 때문에
                -> 도메인 전문가들과 협업필요 
            특성추출 : 독립변수가 크게 상관은 없어 보이지만 그래도 독립변수의 특성을 살리고 싶을 때 사용
                -> 머신러닝 : 공분산이 큰 두개의 정규분포가 있으면 모두 감싸는 1개의 정규분포로 만들어버림

독립성 검증
    허위변수, 혼란변수
    허위변수 : 하나의 독립변수가 2개의 종속변수에 영향을 미쳐서 2개의 종속변수 간에 관계가 있는 것처럼 보이게 만드는 독립변수
    혼란변수 : 영향이 더 크게 보이게 만드는 독립변수

고급 회귀
    다향회귀 : data 분포가 직선이 아닐 때 사용
        data를 조작하거나 회귀선을 직선이 아닌 선으로 만드는 방법
        정규분포, 지수/로그함수, 삼각함수
        mse가 가장 작은 함수를 만들면 문제 없다
    
    조절변수
        종속변수에 직접 영향을 미치지는 않지만 값에 따라 독립변수가 종속변수에 미치는 영향이 달라지는 경우
        y = B1x + B2m + B3mx + a + e (m = 주효과항, mx = 상호작용항)
            B2m = y절편 변화량, B3mx = 기울기 변화량
        매출-시간 그래프에서 광고 효과를 판단하기위해 광고한 시간을 조절변수로 선정 후 변화량 확인

    매개변수
        독립변수가 종속변수에 직접 영향을 미치지는 않지만 다른 변수에 의해 간접적으로 영향을 미칠 수 있는 경우
        이 때 다른 변수를 매개변수라고 함
        독립변수-매개변수, 매개변수-종속변수 간 관계 : 합성함수 f(g(x))
        선형그래프가 아닌 그래프를 사용하는 것이 좋음
        1차식을 사용하면 합성함수 결과도 1차식으로 나와 영향력 판단 힘들어짐
