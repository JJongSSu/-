선형성 : y=ax+b(덧셈, 곱셈으로 증명이 되어야 됨), 일반적인 그래프를 따라간다
정규성 : 예측값에 비슷하게 분포
등분산성 : 모든 구간에서 분산이 일정
독립성 : 다른 요인에 영향을 받으면 안된다

시계열 분석 특성
    선형성, 정규성, 등분산성, 독립성
    시간 -> 범주형 변수 : 일정한 간격으로 측정 = 항상 값이 채워져 있어야 하기 때문에 fillna(전/후 시간의 평균값) 사용(dropna 사용x)
        (시간을 연속형 변수로 측정하게 되면 데이터 양이 많아지고 측정하기 어려워 짐)
    일정한 표본
    분해 가능
    1년 이상 측정 필수 -> 계절성 반영
    시계열 = 추세 + 주기 + 잔차
        추세 : 선형, 장기적 관점
        주기 : 단기적 패턴 
        예측할 수 없는 주기는 대부분 잔차로 넘어감
        주기간의 편차
        인접해 있는 주기의 크기 차이가 너무 크면 추세가 왜곡됨

    주기 관점으로 설명할 때는 주기가 발생된 이유(가설)를 설명해야 함 -> 예측 불가능한 요인
    두 개 이상의 주기가 겹칠 때는 따로 보는게 제일 좋지만 복잡하기 때문에 보통 가장 긴 주기를 기준으로 확인 -> 긴 주기안에 짧은 주기가 들어가 있기 때문

    ARIMA : 시간 주기, 계절성 주기
        AR => 시계열 전체를 사용해서 자기회귀, 이전의 데이터를 통해 현재를 예측, AR(n) : n번째 이전까지의 데이터를 확인
            AR(n)I(m) : I = 차분
        MA => 잔차만을 사용해서 자기회귀
        차분
            바로 옆의 범주형 데이터와 차이를 구함
            미분(순간 변화율)하기 위한 조건
                1) 연속적
                2) 좌/우 극한이 같아야 함
                3) 뾰족한 점이 없어야 함
            -> 시계열 데이터는 범주형 변수이기 때문에 미분 불가능
            -> 차분으로 해결(단위 변화율)
        ARIMA(AR,I,MA) -> ARIMA(1,0,1)

    ARMA : AR과 MA의 장점들을 모아놓은 방법

효과적 보고 : 시각화, 지수화, 예측 모형, 개연화

시각화
    지도학습
        기하 : KNN, SVM

    비지도학습
        계층적 군집분석 -> dendrogram
        SNA : 노드(단어)와 엣지(동시출현빈도)를 통해 연광성을 그려냄. 마인드맵, 네트워크 같은 느낌
    
    EDA, 시계열 분해
    툴 : Tableau, PLS, VBA, AMOS

지수화
    투자 3가지 요소
        수익성
        안전성
        유동성 : 원할 때 얼마나 빠르게 현금으로 바꿀 수 있는가

    정보들을 하나의 값으로 표현

    모든 머신러닝 -> 회귀모델, 로지스틱 회귀(hardmax보다 softmax로 표현하는 것이 좋음)
    f1 score

    툴 : SPSS, Excel, Pipeline

예측모형
    모든 머신러닝, 딥러닝
    컨설턴트 -> 판단근거 확인 필수(머신러닝 알고리즘 등)

    시계열 분석, 강화학습, 몬테카를로 기법
    툴 : 파이썬, orange, brightics

개연화
    interupted time-series analysis(절단된 시계열 분석)
    y = bx + a + e
    회귀분석 파라미터 : 기울기 b, y절편 a

    1. level change / slope change
        y절편 / 기울기 변화

    2. permanent / temporary
        영구적 변화 / 일시적 변화

    3. immediate / time lag
        즉시 발현 / 시간차 발현
    
시계열 그래프로 설득
    1. 실험군과 대조군 사용
        DID(difference in difference)
            (실험군 전 - 대조군 전) - (실험군 후 - 대조군 후) = (실험군 전 - 실험순 후) - (대조군 전 - 대조군 후)
            수학적 근거 : y = b1*x + b2*m + b3*m*x + a -> m, x가 0,1일 때로 나눠서 계산
        -> 일관적인지, 효과가 어디가 더 좋은가 비교 가능

    2. 이상치 확인
        머신러닝에서 학습은 잘 되었는데 예측은 잘 못하는 경우 -> 다른 독립변수가 필요한가?(독립성 위배인가?)
        잘 맞추다가 어느 시점부터 갑자기 모델 예측이 흔들리는 경우(mse가 벌어지는 경우) -> 새로운 독립변수가 개입했나?
        synthatic control -> 새로운 독립변수가 들어왔다고 생각했을 때 확인
            y = b*x + a + e
            예측값 y, 실제값 k, 임계값 w
            (y-k)^2 > w^2가 관찰된 시섬 t에서 특이점이 발견되었다고 할 수 있음
            임계값 설정 -> 관리도에 따라 임의로 설정

        boxplot은 이상치가 많을 때 확인
            중위값, 일분위, 삼분위, 최대/최소
            
        관리도
            평균 m
            관리 상한선/하한선 = m + 3시그마 / m - 3시그마

    3. 추세, 주기 잔차를 확인
        시계열 = 추세 + 주기 + 잔차
        1) 측정단위 -> 일정한 간격(범주형) 설정
        2) 주기 설정
        3) 시계열 분해

        추세 = 주기가 홀수일 때는 양쪽으로 동일하게 배분, 짝수일 때는 앞에 한 개 / 뒤에 한 개 배분해서 구한 값의 평균
        주기 = 설정한 주기 길이 각각의 평균을 구함
        시계열 - 추세 = detrend
        detrend - 주기 = 잔차

        선형성
        정규성 -> 잔차로 확인
        등분산성 -> 각도가 평행해야 됨
        독립성 -> 잔차에서 주기가 발생되면 고려하고 있는 요인 외에 다른 요인이 들어가 있는거임

    


